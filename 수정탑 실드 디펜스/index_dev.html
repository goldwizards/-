<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Core Barrier Defense</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="wrap">
  <div class="leftCol">
    <canvas id="c" width="960" height="540"></canvas>

    <div class="bottomRow">
    <div class="miniPanel" id="wirePanel">
      <div class="miniTitle">와이어 상태(Star UI)</div>
      <canvas id="wire" width="360" height="190"></canvas>
      <div class="miniText" id="wireText"></div>
    </div>
    <div class="miniPanel" id="upgPanelPC">
      <div class="miniTitle">업그레이드</div>
      <div id="uiUpgradesPC" class="small">
        <div class="upgControls" data-upg-ctx="pc">
          <div class="upgTabs">
            <button class="upgTabBtn" data-upg-tab="all">전체</button>
            <button class="upgTabBtn" data-upg-tab="core">코어</button>
            <button class="upgTabBtn" data-upg-tab="turret">포탑</button>
            <button class="upgTabBtn" data-upg-tab="util">유틸</button>
          </div>
          <input class="upgSearch" type="text" maxlength="32" placeholder="업그레이드 검색" data-upg-search>
          <button class="upgCtlBtn" data-upg-only>구매가능만: OFF</button>
          <button class="upgCtlBtn" data-upg-sort>정렬: 기본</button>
        </div>
        <div id="uiUpgListPC"></div>
      </div>
    </div>
  </div>
  </div>

  <div class="panel">
    <div class="panelMobileTop mobileOnly">
      <div class="title">메뉴</div>
      <button id="btnPanelClose" class="closeBtn">닫기 ✕</button>
    </div>
<h1>수정탑 보호막 디펜스</h1>
    <p class="small">
      조작:
      <span class="kbd">좌클릭</span> 포탑 설치 /
      <span class="kbd">우클릭</span> 또는 <span class="kbd">X</span> 포탑 판매(환불 70%~90%) /
      <span class="kbd">1</span> 기본 /
      <span class="kbd">2</span> 슬로우 /
      <span class="kbd">3</span> 스플래시 /
      <span class="kbd">Space</span> 긴급 보호막 /
      <span class=\"kbd\">E</span> 에너지포 /
      <span class="kbd">F</span> 수리 /
      <span class="kbd">R</span> 재시작
    </p>

    <div class="sep"></div>

    <div class="crystalHud">
      <div class="crystalLabel">크리스탈</div>
      <div class="crystalValue" id="uiCrystals">0</div>
    </div>

<p class="stat" id="uiStats"></p>
<p class="small" id="uiEvent"></p>
    <div class="miniPanel" style="margin-top:10px;">
      <div class="miniTitle">다음 웨이브 정보</div>
      <div class="miniText" id="uiPreview"></div>
    </div>

    <p class="small" id="uiMsg"></p>    <p class="small" id="uiCheat"></p>

    <div class="row">
      <button id="btnSound">사운드 ON</button>
      <button id="btnVol">볼륨 85%</button>
    </div>
    <div class="row" style="align-items:center">
      <input id="volSlider" type="range" min="0" max="100" step="1" value="85" style="flex:1">
      <div class="small" id="volVal">85%</div>
    </div>
    <div class="row">
      <button id="btnToggleWire">와이어 표시</button>
    </div>

    <div class="row">
      <button id="btnBg">배경 약함</button>
    </div>

    <div class="row">
      <button id="btnWave">웨이브 시작</button>
      <button id="btnRestart">재시작</button>
    </div>

    <div class="row">
      <button id="btnRepair">수리</button>
      <button id="btnEnergy">에너지포</button>
    </div>

    <div class="row">
      <button id="btnSpeed">배속 1.0x</button>
      <button id="btnCheat">치트 OFF</button>
    </div>
    <div class="miniPanel" style="margin-top:10px;">
      <div class="miniTitle">코어 패시브 (4개 중 1개 선택)</div>
      <div class="corePickGrid">
        <button id="btnCoreRebuild" class="coreBtn blue">
          🔵 재건 코어
          <small>안정 / 장기전</small>
        </button>
        <button id="btnCoreResonance" class="coreBtn orange">
          🟠 공명 반격 코어
          <small>공격 / 포탑 중심</small>
        </button>
        <button id="btnCoreOverload" class="coreBtn red">
          🔴 임계 과부하
          <small>저체력: 포탑 화력↑ / 피해감소↑</small>
        </button>
        <button id="btnCoreOverdrive" class="coreBtn purple">
          🟣 코어 오버드라이브
          <small>수정탑 직접 공격 (저체력 강해짐)</small>
        </button>
      </div>
      <div id="uiCorePassiveDesc" class="corePassiveDesc small">
        패시브를 선택하면 <span class="kbd">웨이브 시작</span>이 가능합니다. (재시작 시 다시 선택)
      </div>
    </div>

<div id="finalSupportPanel" class="miniPanel hidden" style="margin-top:10px;">
  <div class="miniTitle">최종 지원 선택 (웨이브 30 전)</div>
  <div class="corePickGrid" style="grid-template-columns:1fr 1fr;">
    <button id="btnFinalOffense" class="coreBtn orange">
      🟠 화력 지원
      <small>포탑 피해 +15%</small>
    </button>
    <button id="btnFinalDefense" class="coreBtn blue">
      🔵 방호 강화
      <small>보호막 재생 +25%</small>
    </button>
  </div>
  <div id="uiFinalSupportDesc" class="corePassiveDesc small">
    웨이브 30 시작 전에 1개를 선택하십시오. (선택하지 않으면 자동으로 방호 강화)
  </div>
</div>

    <div class="miniPanel" id="upgPanelSide" style="margin-top:10px;">
      <div class="miniTitle">업그레이드</div>
      <div id="uiUpgrades" class="small">
        <div class="upgControls" data-upg-ctx="side">
          <div class="upgTabs">
            <button class="upgTabBtn" data-upg-tab="all">전체</button>
            <button class="upgTabBtn" data-upg-tab="core">코어</button>
            <button class="upgTabBtn" data-upg-tab="turret">포탑</button>
            <button class="upgTabBtn" data-upg-tab="util">유틸</button>
          </div>
          <input class="upgSearch" type="text" maxlength="32" placeholder="업그레이드 검색" data-upg-search>
          <button class="upgCtlBtn" data-upg-only>구매가능만: OFF</button>
          <button class="upgCtlBtn" data-upg-sort>정렬: 기본</button>
        </div>
        <div id="uiUpgListSide"></div>
      </div>
    </div>

    <div class="row">
      <button id="btnEasy">난이도↓</button>
      <button id="btnHard">난이도↑</button>
    </div>

  </div>
</div>

<div id="mobileBar" class="mobileBar hidden" aria-label="모바일 컨트롤">
  <div class="mbRow">
    <button id="mbBasic" class="mbBtn primary"><span>기본</span><small>설치(35)</small></button>
    <button id="mbSlow" class="mbBtn primary"><span>슬로우</span><small>설치(45)</small></button>
    <button id="mbSplash" class="mbBtn primary"><span>스플래시</span><small>설치(60)</small></button>
  </div>
  <div class="mbRow">
    <button id="mbWave" class="mbBtn primary"><span>웨이브</span><small>시작</small></button>
    <button id="mbRepair" class="mbBtn"><span>수리</span><small>F</small></button>
    <button id="mbAegis" class="mbBtn"><span>긴급</span><small>Space</small></button>
    <button id="mbSell" class="mbBtn danger"><span>판매 OFF</span><small>길게=판매</small></button>
  </div>
  <div class="mbRow hidden" id="mbFinalRow">
  <button id="mbFinalOffense" class="mbBtn primary"><span>화력</span><small>+15%</small></button>
  <button id="mbFinalDefense" class="mbBtn primary"><span>방호</span><small>+25%</small></button>
</div>
  <div class="mbRow" id="mbCheatRow">
    <button id="mbCheat" class="mbBtn"><span>치트 OFF</span><small>T</small></button>
    <button id="mbMenu" class="mbBtn"><span>메뉴</span><small>업글/패시브</small></button>
    <button id="mbCheatMenu" class="mbBtn danger" disabled><span>치트 기능</span><small>열기</small></button>
  </div>
<div class="mbRow" id="mbWireRow">
    <button id="mbEnergy" class="mbBtn primary"><span>에너지포</span><small>800</small></button>
  </div>
<div class="mbHint">팁: 포탑을 <b>길게 누르면 판매</b>됩니다. (빌드/클리어에서만)</div>
</div>
<div id="cheatModal" class="cheatModal hidden" aria-label="치트 메뉴">
  <div class="cheatCard" role="dialog" aria-modal="true">
    <div class="cheatTitle">치트</div>
    <div class="cheatGrid">
      <button id="chCrystals">+500 크리스탈</button>
      <button id="chMaxUpg">업글 MAX</button>
      <button id="chHeal">HP 풀회복</button>
      <button id="chShield">보호막 풀충전</button>
      <button id="chKill">적 제거</button>
      <button id="chSkip">웨이브 스킵</button>
      <button id="chGod">무적 토글</button>
      <button id="chClose" class="danger">닫기</button>
    </div>
    <div class="cheatNote">※ 모바일: 버튼으로 사용 가능 / PC: T 토글 후 K,H,J,B,N,U,G</div>
  </div>
</div>

<div id="panelBackdrop" class="panelBackdrop hidden" aria-hidden="true"></div>

<script src="js/game.js"></script>

</body>
</html>
